<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadoras Greenn</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.min.css"/>
    <style>
        :root {
            --primary-color: #4CAF50;
            --primary-color-light: rgba(76, 175, 80, 0.2);
            --primary-color-transparent: rgba(76, 175, 80, 0.1);
            --background-dark: #1a1a1a;
            --background-card: #2a2a2a;
            --text-light: #fff;
            --text-gray: #81858e;
            --border-color: rgba(76, 175, 80, 0.3);
            --red-color: #f44336;
            --yellow-color: #FFC107;
            --green-color: #4CAF50;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-light);
            margin: 0;
            padding: 20px;
        }

        .calculators-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 15px 25px;
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-button.active {
            background: var(--primary-color);
            color: var(--text-light);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
        }

        .swiper {
            width: 100%;
            height: auto;
        }

        .swiper-slide {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .swiper-slide-active {
            opacity: 1;
        }

        .swiper-button-next,
        .swiper-button-prev,
        .swiper-pagination {
            display: none;
        }

        /* Estilos para o Planejamento Estratégico */
        .simulator {
            max-width: 1200px;
            margin: 30px auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .container-all-marketing {
            display: grid;
            gap: 15px;
        }

        .container-marketing {
            display: grid;
            gap: 10px;
            height: 78px;
            padding: 0 20px;
            align-content: center;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background-color: var(--background-card);
        }

        .container-marketing:not(.off) {
            background-color: var(--background-card);
        }

        .container-marketing.total {
            background: var(--primary-color-transparent);
            border: 1px solid var(--primary-color);
        }

        .container-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .container-label .name {
            font-weight: 600;
            font-size: 16px;
            color: var(--text-light);
        }

        .container-label .value {
            color: var(--primary-color);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .container-label .off {
            color: var(--primary-color);
            font-weight: 600;
            cursor: default;
        }

        .container-label .lucro {
            color: var(--primary-color);
            font-size: 16px;
            font-weight: 600;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 4px;
            border-radius: 15px;
            background: #333;
            outline: none;
            margin: 10px 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
            transition: all 0.3s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.7);
        }

        .off {
            background: rgba(0, 0, 0, 0.2) !important;
        }

        /* Estilos para o Sonar do Tráfego Avançado */
        .title {
            text-align: center;
            color: var(--primary-color);
            font-size: 2.5em;
            margin-bottom: 30px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .subtitle {
            text-align: center;
            color: var(--text-light);
            font-size: 1.2em;
            margin-bottom: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .metrics-container {
            background-color: var(--background-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            width: 100%;
            max-width: 450px;
        }

        .metrics-container h2 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .metrics-section {
            margin-bottom: 30px;
        }

        .metrics-section h3 {
            color: var(--text-light);
            font-size: 1.1em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-gray);
            font-size: 0.9em;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            font-family: 'Montserrat', sans-serif;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .metric-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
        }

        .metric-name {
            font-weight: 500;
        }

        .metric-value {
            font-weight: 600;
            color: var(--primary-color);
        }

        .sonar-wrapper {
            position: relative;
            width: 100%;
            max-width: 500px;
        }

        .status-message {
            background-color: rgba(42, 42, 42, 0.9);
            backdrop-filter: blur(5px);
            padding: 20px 25px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            transition: all 0.5s ease;
        }

        .sonar-container {
            width: 500px;
            height: 500px;
            position: relative;
            background-color: rgba(0, 0, 0, 0.95);
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .pulse-wave {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            height: 400px;
            margin-left: -200px;
            margin-top: -200px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 255, 0, 0.2) 0%, transparent 70%);
            transform-origin: center;
            animation: pulseWave 4s ease-out;
            pointer-events: none;
        }

        .sonar-sweep {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            height: 400px;
            margin-left: -200px;
            margin-top: -200px;
            background: conic-gradient(from 0deg at 50% 50%, transparent 0deg, rgba(0, 255, 0, 0.3) 30deg, transparent 40deg);
            border-radius: 50%;
            animation: rotate 4s linear infinite;
            transform-origin: center;
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .detection-point {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #0f0;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px #0f0;
            z-index: 10;
            transition: all 1s ease-in-out;
        }

        .green-text { color: var(--green-color); }
        .yellow-text { color: var(--yellow-color); }
        .red-text { color: var(--red-color); }

        @keyframes pulseWave {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .thermometer-container {
            width: 100%;
            max-width: 350px;
            background-color: var(--background-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }

        .thermometer-container h2 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .metric-thermometer {
            margin-bottom: 20px;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .metric-name-therm {
            font-weight: 600;
        }

        .metric-value-therm {
            font-weight: 600;
        }

        .thermometer-bar {
            height: 20px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
        }

        .thermometer-level {
            height: 100%;
            width: 0%;
            transition: width 1s ease;
        }

        .thermometer-markers {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-top: 5px;
            font-size: 0.8em;
            color: var(--text-gray);
        }

        .thermometer-markers::before {
            content: '';
            position: absolute;
            height: 5px;
            width: 1px;
            background-color: var(--text-gray);
            left: 33.33%;
            top: -5px;
        }

        .thermometer-markers::after {
            content: '';
            position: absolute;
            height: 5px;
            width: 1px;
            background-color: var(--text-gray);
            right: 33.33%;
            top: -5px;
        }

        .thermometer-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            margin-top: 5px;
        }

        .ruim {
            color: var(--red-color);
        }

        .bom {
            color: var(--yellow-color);
        }

        .otimo {
            color: var(--green-color);
        }

        .next-step {
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .next-step strong {
            color: var(--primary-color);
        }

        .optimization-container {
            width: 100%;
            max-width: 900px;
            background-color: var(--background-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            margin-top: 30px;
        }

        .optimization-container h2 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .optimization-section {
            margin-bottom: 25px;
        }

        .optimization-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .optimization-header h3 {
            margin: 0;
            color: var(--text-light);
        }

        .optimization-header .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .optimization-content {
            padding-left: 22px;
        }

        .optimization-causes {
            margin-bottom: 15px;
        }

        .optimization-causes h4, .optimization-actions h4 {
            color: var(--text-gray);
            font-size: 0.9em;
            margin-top: 0;
            margin-bottom: 5px;
        }

        .optimization-causes ul, .optimization-actions ul {
            margin: 0;
            padding-left: 20px;
        }

        .optimization-causes li, .optimization-actions li {
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .optimization-actions li {
            color: var(--primary-color);
        }

        .detailed-action {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
            border-left: 3px solid var(--primary-color);
        }

        /* Estilos para Métricas Comerciais */
        .calculadora {
            max-width: 900px;
            margin: 30px auto;
            padding: 30px;
            background: #2a2a2a;
            box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        h2 {
            font-size: 24px;
            margin-bottom: 30px;
            text-align: center;
            color: #fff;
        }

        .highlight {
            color: #4CAF50;
            font-weight: bold;
        }

        .sliders, .resultados {
            flex: 1;
            max-width: 50%;
            padding: 25px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(76, 175, 80, 0.1);
        }

        .slider-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .slider-group input[type="range"] {
            flex: 1;
            margin: 0 15px;
            -webkit-appearance: none;
            background: #333;
            height: 6px;
            border-radius: 3px;
        }

        .slider-group span {
            min-width: 80px;
            text-align: center;
            font-size: 14px;
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 600;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .resultados h3 {
            text-align: center;
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .resultado {
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .resultado:hover {
            transform: translateY(-5px);
            box-shadow: 0px 4px 15px rgba(76, 175, 80, 0.2);
            background: rgba(76, 175, 80, 0.1);
        }

        .resultado strong {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4CAF50;
        }

        /* Estilos para CPA Máximo */
        .input-container {
            background-color: var(--background-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            width: 100%;
            max-width: 450px;
        }

        .input-container h2 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h3 {
            color: var(--text-light);
            font-size: 1.1em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .platform-fee {
            display: flex;
            gap: 10px;
        }

        .platform-fee .input-group {
            flex: 1;
        }

        .variable-cost {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .variable-cost .cost-name {
            flex: 2;
        }

        .variable-cost .cost-value {
            flex: 1;
        }

        .variable-cost .cost-type {
            display: flex;
            align-items: center;
            margin-left: 10px;
        }

        .cost-type label {
            display: flex;
            align-items: center;
            margin-right: 10px;
            cursor: pointer;
            color: var(--text-gray);
            font-size: 0.9em;
        }

        .cost-type input[type="radio"] {
            margin-right: 5px;
            cursor: pointer;
            width: auto;
        }

        .add-cost-btn {
            background-color: var(--primary-color-transparent);
            color: var(--primary-color);
            border: 1px dashed var(--primary-color);
            border-radius: 8px;
            padding: 10px;
            width: 100%;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .add-cost-btn:hover {
            background-color: var(--primary-color-light);
        }

        .remove-cost {
            background-color: transparent;
            color: var(--red-color);
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
        }

        .calculate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 20px;
            font-family: 'Montserrat', sans-serif;
            transition: background-color 0.3s;
        }

        .calculate-btn:hover {
            background-color: #3e8e41;
        }

        .results-container {
            background-color: var(--background-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            width: 100%;
            max-width: 450px;
        }

        .results-container h2 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .results-section {
            margin-bottom: 30px;
        }

        .results-section h3 {
            color: var(--text-light);
            font-size: 1.1em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
        }

        .result-name {
            font-weight: 500;
        }

        .result-value {
            font-weight: 600;
            color: var(--primary-color);
        }

        .roi-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .roi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .roi-card h4 {
            color: var(--text-light);
            margin-top: 0;
            margin-bottom: 10px;
        }

        .roi-card .cpa-value {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .roi-card .budget-value {
            font-size: 1.2em;
            color: var(--text-gray);
        }

        .roi-1 {
            border-color: var(--red-color);
        }

        .roi-1 .cpa-value {
            color: var(--red-color);
        }

        .roi-1-5 {
            border-color: var(--yellow-color);
        }

        .roi-1-5 .cpa-value {
            color: var(--yellow-color);
        }

        .roi-2 {
            border-color: var(--green-color);
        }

        .roi-2 .cpa-value {
            color: var(--green-color);
        }

        .budget-planning {
            margin-top: 30px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .budget-planning h4 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .budget-input {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .budget-input .input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .budget-results {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .budget-card {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
        }

        .budget-card h5 {
            color: var(--text-light);
            margin: 0 0 10px 0;
            font-size: 0.9em;
        }

        .budget-card .budget-amount {
            font-size: 1.2em;
            font-weight: 600;
        }

        .roi-1 .budget-amount {
            color: var(--red-color);
        }

        .roi-1-5 .budget-amount {
            color: var(--yellow-color);
        }

        .roi-2 .budget-amount {
            color: var(--green-color);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .nav-buttons {
                flex-wrap: wrap;
            }
            
            .nav-button {
                font-size: 14px;
                padding: 12px 20px;
            }

            .container {
                flex-direction: column;
                align-items: center;
            }

            .sonar-container {
                width: 300px;
                height: 300px;
            }

            .sonar-sweep, .pulse-wave {
                width: 240px;
                height: 240px;
                margin-left: -120px;
                margin-top: -120px;
            }

            .metrics-container, .thermometer-container, .optimization-container {
                max-width: 100%;
            }

            .simulator {
                grid-template-columns: 1fr;
            }

            .container-label .value,
            .container-label .off {
                font-size: 14px;
            }

            .platform-fee {
                flex-direction: column;
                gap: 15px;
            }

            .variable-cost {
                flex-direction: column;
                align-items: stretch;
            }

            .variable-cost .cost-type {
                margin-left: 0;
                margin-top: 10px;
            }

            .budget-input {
                flex-direction: column;
                align-items: stretch;
            }

            .budget-results {
                flex-direction: column;
            }

            .input-container, .results-container {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="calculators-container">
        <!-- Botões de navegação -->
        <div class="nav-buttons">
            <button class="nav-button active" data-slide="0">Planejamento Estratégico</button>
            <button class="nav-button" data-slide="1">Sonar do Tráfego Avançado</button>
            <button class="nav-button" data-slide="2">Métricas Comerciais</button>
            <button class="nav-button" data-slide="3">CPA Máximo</button>
        </div>

        <!-- Container do Swiper -->
        <div class="swiper">
            <div class="swiper-wrapper">
                <!-- Aba 1: Planejamento Estratégico -->
                <div class="swiper-slide" id="calculator-1">
                    <h1>Planejamento Estratégico</h1>
                    <div class="simulator">
                        <div>
                            <div class="container-all-marketing">
                                <div class="container-marketing">
                                    <div class="container-label">
                                        <span class="name">Quanto quer faturar?</span>
                                        <span class="value">R$ <span id="profitDisplay">10.000,00</span></span>
                                    </div>
                                    <input id="profitSlider" type="range" step="1000" min="1000" max="500000" value="10000" data-max="500000"/>
                                </div>
                
                                <div class="container-marketing">
                                    <div class="container-label">
                                        <span class="name">Preço do produto</span>
                                        <span class="value">R$ <span id="productDisplay">3.500,00</span></span>
                                    </div>
                                    <input id="productSlider" type="range" min="0" max="15000" step="50" value="3500" data-max="15000"/>
                                </div>
                
                                <div class="container-marketing">
                                    <div class="container-label">
                                        <span class="name">A cada quantos leads sai uma venda?</span>
                                        <span class="value"><span id="leadsDisplay">10</span></span>
                                    </div>
                                    <input id="leadsSlider" type="range" min="1" max="50" value="10" data-max="50"/>
                                </div>
                
                                <div class="container-marketing">
                                    <div class="container-label">
                                        <span class="name">Qual é o preço médio do lead?</span>
                                        <span class="value">R$ <span id="leadValueDisplay">8,00</span></span>
                                    </div>
                                    <input id="leadValueSlider" type="range" min="0" max="100" step="0.01" value="8" data-max="100"/>
                                </div>
                
                                <div class="container-marketing off">
                                    <div class="container-label">
                                        <span class="off">Conversão</span>
                                        <span class="off"><span id="conversionDisplay">%</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <div>
                            <div class="container-all-marketing">
                                <div class="container-marketing total">
                                    <div class="container-label">
                                        <div style="display: flex; gap: 10px; align-items: center; width: 100%;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                                                <circle cx="20" cy="20" r="20" fill="#4CAF50"/>
                                                <path d="M20 11V29.3333M24.1667 14.3333H17.9167C17.1431 14.3333 16.4013 14.6406 15.8543 15.1876C15.3073 15.7346 15 16.4765 15 17.25C15 18.0235 15.3073 18.7654 15.8543 19.3124C16.4013 19.8594 17.1431 20.1667 17.9167 20.1667H22.0833C22.8569 20.1667 23.5987 20.474 24.1457 21.0209C24.6927 21.5679 25 22.3098 25 23.0833C25 23.8569 24.6927 24.5987 24.1457 25.1457C23.5987 25.6927 22.8569 26 22.0833 26H15" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <span class="lucro">Lucro</span>
                                            <span class="value" style="cursor: default; display: flex; align-items: end; justify-content: end; width: 100%;">
                                                R$ <span id="profitCalcDisplay">0,00</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                
                                <div class="container-marketing off">
                                    <div class="container-label">
                                        <span class="off">Quantas vendas preciso fazer?</span>
                                        <span class="off"><span id="salesDisplay">0</span></span>
                                    </div>
                                </div>
                
                                <div class="container-marketing off">
                                    <div class="container-label">
                                        <span class="off">Quantos leads preciso captar?</span>
                                        <span class="off"><span id="leadsRequiredDisplay">0</span></span>
                                    </div>
                                </div>
                
                                <div class="container-marketing off">
                                    <div class="container-label">
                                        <span class="off">Quanto vou ter que investir?</span>
                                        <span class="off"><span id="investmentDisplay">0</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Aba 2: Sonar do Tráfego Avançado -->
                <div class="swiper-slide" id="calculator-2">
                    <h1 class="title">Sonar do Tráfego Avançado</h1>
                    <p class="subtitle">Preencha as métricas diretamente do seu gerenciador de anúncios para obter uma análise completa do seu funil e recomendações específicas para otimização e escala.</p>

                    <div class="container">
                        <div class="metrics-container">
                            <h2>Métricas do Gerenciador</h2>

                            <div class="metrics-section">
                                <h3>Métricas de Anúncios</h3>
                                
                                <div class="input-group">
                                    <label for="impressions">Impressões</label>
                                    <input type="number" id="impressions" placeholder="Número total de impressões">
                                </div>
                                
                                <div class="input-group">
                                    <label for="clicks">Cliques no Link</label>
                                    <input type="number" id="clicks" placeholder="Número total de cliques">
                                </div>

                                <div class="input-group">
                                    <label for="cpm">CPM (R$)</label>
                                    <input type="number" id="cpm" step="0.01" placeholder="Custo por 1000 impressões">
                                </div>

                                <div class="input-group">
                                    <label for="cpc">CPC (R$)</label>
                                    <input type="number" id="cpc" step="0.01" placeholder="Custo por clique">
                                </div>
                            </div>

                            <div class="metrics-section">
                                <h3>Métricas do Site</h3>
                                
                                <div class="input-group">
                                    <label for="pageviews">Visualizações da Página de Destino</label>
                                    <input type="number" id="pageviews" placeholder="Número total de visualizações">
                                </div>
                                
                                <div class="input-group">
                                    <label for="checkouts">Checkout Iniciados</label>
                                    <input type="number" id="checkouts" placeholder="Número de checkouts iniciados">
                                </div>
                                
                                <div class="input-group">
                                    <label for="purchases">Compras</label>
                                    <input type="number" id="purchases" placeholder="Número de compras realizadas">
                                </div>

                                <div class="input-group">
                                    <label for="adSpend">Investimento Total (R$)</label>
                                    <input type="number" id="adSpend" step="0.01" placeholder="Valor total investido">
                                </div>

                                <div class="input-group">
                                    <label for="averageOrder">Ticket Médio (R$)</label>
                                    <input type="number" id="averageOrder" step="0.01" placeholder="Valor médio por compra">
                                </div>
                            </div>

                            <button id="calculateBtn" style="background-color: var(--primary-color); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%; margin-top: 10px; font-family: 'Montserrat', sans-serif;">Calcular Métricas</button>
                        </div>

                        <div class="sonar-wrapper">
                            <div id="status-message" class="status-message">Preencha os campos das métricas e clique em "Calcular" para visualizar o resultado</div>
                            <div class="sonar-container">
                                <!-- Grade base do sonar -->
                                <svg class="grid-overlay" width="100%" height="100%" viewBox="0 0 500 500">
                                    <defs>
                                        <radialGradient id="gridGradient">
                                            <stop offset="0%" stop-color="#0f0" stop-opacity="0.3"/>
                                            <stop offset="100%" stop-color="#0f0" stop-opacity="0.1"/>
                                        </radialGradient>
                                    </defs>
                                    
                                    <!-- Círculos concêntricos -->
                                    <g stroke="#0f0" stroke-width="1" opacity="0.5">
                                        <circle cx="250" cy="250" r="200" fill="none"/>
                                        <circle cx="250" cy="250" r="150" fill="none"/>
                                        <circle cx="250" cy="250" r="100" fill="none"/>
                                        <circle cx="250" cy="250" r="50" fill="none"/>
                                    </g>

                                    <!-- Linhas cruzadas -->
                                    <line x1="50" y1="250" x2="450" y2="250" stroke="#0f0" stroke-width="1" opacity="0.3"/>
                                    <line x1="250" y1="50" x2="250" y2="450" stroke="#0f0" stroke-width="1" opacity="0.3"/>

                                    <!-- Marcadores de ângulo -->
                                    <g fill="#0f0" font-size="12" opacity="0.5">
                                        <text x="250" y="40">0°</text>
                                        <text x="460" y="250">90°</text>
                                        <text x="250" y="470">180°</text>
                                        <text x="30" y="250">270°</text>
                                    </g>
                                </svg>

                                <!-- Ponto de detecção -->
                                <div id="detectionPoint" class="detection-point" style="left: 250px; top: 250px;"></div>

                                <!-- Efeito de varredura -->
                                <div class="sonar-sweep"></div>

                                <!-- Container para as ondas de pulso -->
                                <div id="pulseContainer"></div>
                            </div>

                            <div id="calculated-metrics" style="background-color: var(--background-card); padding: 20px; border-radius: 10px; border: 1px solid var(--border-color);">
                                <h3 style="color: var(--primary-color); text-align: center; margin-top: 0;">Métricas Calculadas</h3>
                                
                                <div class="metric-display">
                                    <span class="metric-name">CTR (Taxa de Cliques):</span>
                                    <span class="metric-value" id="ctr-value">0.00%</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Connect Rate (Clique → Page View):</span>
                                    <span class="metric-value" id="connect-rate-value">0.00%</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Conversão da Página (Page View → Checkout):</span>
                                    <span class="metric-value" id="page-conversion-value">0.00%</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Conversão do Checkout (Checkout → Compra):</span>
                                    <span class="metric-value" id="checkout-conversion-value">0.00%</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Taxa de Conversão Total:</span>
                                    <span class="metric-value" id="total-conversion-value">0.00%</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">CAC (Custo de Aquisição de Cliente):</span>
                                    <span class="metric-value" id="cac-value">R$ 0.00</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">ROAS:</span>
                                    <span class="metric-value" id="roas-value">0.00</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Número de Vendas:</span>
                                    <span class="metric-value" id="sales-count-value">0</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Lucro Bruto:</span>
                                    <span class="metric-value" id="gross-profit-value">R$ 0.00</span>
                                </div>
                                
                                <div class="metric-display">
                                    <span class="metric-name">Lucro (%):</span>
                                    <span class="metric-value" id="profit-percentage-value">0.00%</span>
                                </div>
                            </div>
                        </div>

                        <div class="thermometer-container">
                            <h2>Termômetro de Métricas</h2>
                            
                            <div class="metric-thermometer">
                                <div class="metric-header">
                                    <span class="metric-name-therm">CTR</span>
                                    <span class="metric-value-therm" id="ctr-therm-value">0.00%</span>
                                </div>
                                <div class="thermometer-bar">
                                    <div class="thermometer-level" id="ctr-level" style="background: linear-gradient(to right, var(--red-color), var(--yellow-color), var(--green-color));"></div>
                                </div>
                                <div class="thermometer-label">
                                    <span class="ruim">Ruim</span>
                                    <span class="bom">Bom</span>
                                    <span class="otimo">Ótimo</span>
                                </div>
                                <div class="next-step" id="ctr-next-step"></div>
                            </div>
                            
                            <div class="metric-thermometer">
                                <div class="metric-header">
                                    <span class="metric-name-therm">Connect Rate</span>
                                    <span class="metric-value-therm" id="connect-rate-therm-value">0.00%</span>
                                </div>
                                <div class="thermometer-bar">
                                    <div class="thermometer-level" id="connect-rate-level" style="background: linear-gradient(to right, var(--red-color), var(--yellow-color), var(--green-color));"></div>
                                </div>
                                <div class="thermometer-label">
                                    <span class="ruim">Ruim</span>
                                    <span class="bom">Bom</span>
                                    <span class="otimo">Ótimo</span>
                                </div>
                                <div class="next-step" id="connect-rate-next-step"></div>
                            </div>
                            
                            <div class="metric-thermometer">
                                <div class="metric-header">
                                    <span class="metric-name-therm">Conversão da Página</span>
                                    <span class="metric-value-therm" id="page-conversion-therm-value">0.00%</span>
                                </div>
                                <div class="thermometer-bar">
                                    <div class="thermometer-level" id="page-conversion-level" style="background: linear-gradient(to right, var(--red-color), var(--yellow-color), var(--green-color));"></div>
                                </div>
                                <div class="thermometer-label">
                                    <span class="ruim">Ruim</span>
                                    <span class="bom">Bom</span>
                                    <span class="otimo">Ótimo</span>
                                </div>
                                <div class="next-step" id="page-conversion-next-step"></div>
                            </div>
                            
                            <div class="metric-thermometer">
                                <div class="metric-header">
                                    <span class="metric-name-therm">Conversão do Checkout</span>
                                    <span class="metric-value-therm" id="checkout-conversion-therm-value">0.00%</span>
                                </div>
                                <div class="thermometer-bar">
                                    <div class="thermometer-level" id="checkout-conversion-level" style="background: linear-gradient(to right, var(--red-color), var(--yellow-color), var(--green-color));"></div>
                                </div>
                                <div class="thermometer-label">
                                    <span class="ruim">Ruim</span>
                                    <span class="bom">Bom</span>
                                    <span class="otimo">Ótimo</span>
                                </div>
                                <div class="next-step" id="checkout-conversion-next-step"></div>
                            </div>
                        </div>
                    </div>

                    <div class="container">
                        <div class="optimization-container" id="optimization-recommendations">
                            <h2>Mapa de Otimização</h2>
                            <div class="optimization-placeholder" style="text-align: center; padding: 40px 20px; color: var(--text-gray);">
                                Calcule suas métricas para receber recomendações de otimização personalizadas
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Aba 3: Métricas Comerciais -->
                <div class="swiper-slide" id="calculator-3">
                    <div class="calculadora">
                        <h2>
                            Descubra <span class="highlight">quanto você pode ganhar por mês</span> aplicando nossa estrutura
                        </h2>
                
                        <div class="container">
                            <!-- Seção de sliders -->
                            <div class="sliders">
                                <label for="investimento">Investimento por Mês (R$):</label>
                                <div class="slider-group">
                                    <input type="range" id="investimento" min="1000" max="100000" step="1000" value="1000" oninput="calcular()">
                                    <span id="investimentoVal">1.000</span>
                                </div>
                                
                                <label for="precoLead">Preço por Lead (R$):</label>
                                <div class="slider-group">
                                    <input type="range" id="precoLead" min="1" max="100" step="1" value="5" oninput="calcular()">
                                    <span id="precoLeadVal">5</span>
                                </div>
                                
                                <label for="agendamento">Taxa de Agendamento (%):</label>
                                <div class="slider-group">
                                    <input type="range" id="agendamento" min="5" max="100" step="5" value="10" oninput="calcular()">
                                    <span id="agendamentoVal">10</span>
                                </div>
                                
                                <label for="comparecimento">Taxa de Comparecimento (%):</label>
                                <div class="slider-group">
                                    <input type="range" id="comparecimento" min="5" max="100" step="5" value="50" oninput="calcular()">
                                    <span id="comparecimentoVal">50</span>
                                </div>
                                
                                <label for="conversao">Taxa de Conversão (%):</label>
                                <div class="slider-group">
                                    <input type="range" id="conversao" min="5" max="100" step="5" value="10" oninput="calcular()">
                                    <span id="conversaoVal">10</span>
                                </div>
                                
                                <label for="ticketMedio">Ticket Médio (R$):</label>
                                <div class="slider-group">
                                    <input type="range" id="ticketMedio" min="100" max="5000" step="100" value="1000" oninput="calcular()">
                                    <span id="ticketMedioVal">1.000</span>
                                </div>
                            </div>
                            
                            <!-- Seção de resultados -->
                            <div class="resultados">
                                <h3>RESULTADOS (MENSAL):</h3>
                                <div class="resultado">
                                    <strong>Faturamento:</strong> R$ <span id="faturamento">0</span>
                                </div>
                                <div class="resultado">
                                    <strong>Número de Vendas:</strong> <span id="vendas">0</span>
                                </div>
                                <div class="resultado">
                                    <strong>Custo por Call Realizada:</strong> R$ <span id="custoCall">0</span>
                                </div>
                                <div class="resultado">
                                    <strong>CAC:</strong> R$ <span id="cac3">0</span>
                                </div>
                                <div class="resultado">
                                    <strong>ROAS:</strong> <span id="roas3">0</span>
                                </div>
                                <div class="resultado">
                                    <strong>Número de SDRs:</strong> <span id="sdrs">1</span>
                                </div>
                                <div class="resultado">
                                    <strong>Número de Closers:</strong> <span id="closers">1</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Aba 4: CPA Máximo -->
                <div class="swiper-slide" id="calculator-4">
                    <h1 class="title">CPA Máximo</h1>
                    <p class="subtitle">Calcule o CPA máximo ideal com base na sua margem de contribuição para atingir o ROI desejado nos seus investimentos de marketing.</p>

                    <div class="container">
                        <div class="input-container">
                            <h2>Dados de Entrada</h2>

                            <div class="input-section">
                                <h3>Informações do Produto</h3>
                                
                                <div class="input-group">
                                    <label for="product-price">Valor do Produto (R$)</label>
                                    <input type="number" id="product-price" placeholder="Digite o valor do seu produto" step="0.01">
                                </div>
                            </div>

                            <div class="input-section">
                                <h3>Taxa de Plataforma</h3>
                                
                                <div class="platform-fee">
                                    <div class="input-group">
                                        <label for="platform-percentage">Percentual (%)</label>
                                        <input type="number" id="platform-percentage" placeholder="Ex: 6.99" step="0.01">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="platform-fixed">Taxa Fixa (R$)</label>
                                        <input type="number" id="platform-fixed" placeholder="Ex: 2.50" step="0.01">
                                    </div>
                                </div>
                            </div>

                            <div class="input-section">
                                <h3>Custos Variáveis</h3>
                                
                                <div id="variable-costs-container">
                                    <!-- Os custos variáveis serão adicionados aqui dinamicamente -->
                                </div>
                                
                                <button id="add-cost-btn" class="add-cost-btn">+ Adicionar Custo Variável</button>
                            </div>

                            <button id="calculate-btn" class="calculate-btn">Calcular CPA Máximo</button>
                        </div>

                        <div class="results-container">
                            <h2>Resultados</h2>

                            <div class="results-section">
                                <h3>Análise de Margem</h3>
                                
                                <div class="result-item">
                                    <span class="result-name">Receita por Venda:</span>
                                    <span class="result-value" id="revenue-per-sale">R$ 0,00</span>
                                </div>
                                
                                <div class="result-item">
                                    <span class="result-name">Custos Variáveis:</span>
                                    <span class="result-value" id="total-variable-costs">R$ 0,00</span>
                                </div>
                                
                                <div class="result-item">
                                    <span class="result-name">Margem de Contribuição (R$):</span>
                                    <span class="result-value" id="contribution-margin">R$ 0,00</span>
                                </div>
                                
                                <div class="result-item">
                                    <span class="result-name">Margem de Contribuição (%):</span>
                                    <span class="result-value" id="contribution-percentage">0,00%</span>
                                </div>
                            </div>

                            <div class="results-section">
                                <h3>CPA Máximo por ROI</h3>
                                
                                <div class="roi-cards">
                                    <div class="roi-card roi-1">
                                        <h4>ROI 1 (Break Even)</h4>
                                        <div class="cpa-value" id="cpa-roi-1">R$ 0,00</div>
                                        <div class="description">Investimento = Retorno</div>
                                    </div>
                                    
                                    <div class="roi-card roi-1-5">
                                        <h4>ROI 1.5</h4>
                                        <div class="cpa-value" id="cpa-roi-1-5">R$ 0,00</div>
                                        <div class="description">50% de lucro sobre o investido</div>
                                    </div>
                                    
                                    <div class="roi-card roi-2">
                                        <h4>ROI 2 (Ideal)</h4>
                                        <div class="cpa-value" id="cpa-roi-2">R$ 0,00</div>
                                        <div class="description">100% de lucro sobre o investido</div>
                                    </div>
                                </div>
                                
                                <div class="budget-planning">
                                    <h4>Planejamento de Orçamento</h4>
                                    
                                    <div class="budget-input">
                                        <div class="input-group">
                                            <label for="sales-goal">Meta de Vendas (quantidade)</label>
                                            <input type="number" id="sales-goal" placeholder="Quantas vendas você quer alcançar?">
                                        </div>
                                    </div>
                                    
                                    <div class="budget-results">
                                        <div class="budget-card roi-1">
                                            <h5>Orçamento ROI 1</h5>
                                            <div class="budget-amount" id="budget-roi-1">R$ 0,00</div>
                                        </div>
                                        
                                        <div class="budget-card roi-1-5">
                                            <h5>Orçamento ROI 1.5</h5>
                                            <div class="budget-amount" id="budget-roi-1-5">R$ 0,00</div>
                                        </div>
                                        
                                        <div class="budget-card roi-2">
                                            <h5>Orçamento ROI 2</h5>
                                            <div class="budget-amount" id="budget-roi-2">R$ 0,00</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.min.js"></script>
    
    <script>
        // Inicialização do Swiper
        const swiper = new Swiper('.swiper', {
            effect: 'fade',
            fadeEffect: {
                crossFade: true
            },
            allowTouchMove: false,
            speed: 300,
        });

        // Navegação pelos botões
        const navButtons = document.querySelectorAll('.nav-button');
        
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                swiper.slideTo(button.dataset.slide);
            });
        });
    </script>

    <!-- Script para o Planejamento Estratégico -->
    <script>
        // Function to format number as Brazilian currency
        function formatCurrency(value) {
            return value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        // Function to calculate and update all values
        function calculateProfit() {
            // Get current slider values
            const desiredProfit = parseFloat(document.getElementById('profitSlider').value);
            const productPrice = parseFloat(document.getElementById('productSlider').value);
            const leadsPerSale = parseFloat(document.getElementById('leadsSlider').value);
            const leadCost = parseFloat(document.getElementById('leadValueSlider').value);

            // Calculate sales required
            const salesRequired = Math.ceil(desiredProfit / productPrice);

            // Calculate total leads required
            const leadsRequired = Math.ceil(salesRequired * leadsPerSale);

            // Calculate total investment in leads
            const totalInvestment = leadsRequired * leadCost;

            // Calculate conversion rate
            const conversionRate = ((1 / leadsPerSale) * 100).toFixed(2);

            // Calculate actual profit
            const actualProfit = (salesRequired * productPrice) - totalInvestment;

            // Update displays
            document.getElementById('profitDisplay').textContent = formatCurrency(desiredProfit);
            document.getElementById('productDisplay').textContent = formatCurrency(productPrice);
            document.getElementById('leadsDisplay').textContent = leadsPerSale;
            document.getElementById('leadValueDisplay').textContent = formatCurrency(leadCost);
            
            document.getElementById('conversionDisplay').textContent = conversionRate + '%';
            document.getElementById('profitCalcDisplay').textContent = formatCurrency(Math.max(actualProfit, 0));
            document.getElementById('salesDisplay').textContent = salesRequired;
            document.getElementById('leadsRequiredDisplay').textContent = leadsRequired;
            document.getElementById('investmentDisplay').textContent = formatCurrency(totalInvestment);
        }

        // Add event listeners to all sliders
        const sliders = [
            'profitSlider', 
            'productSlider', 
            'leadsSlider', 
            'leadValueSlider'
        ];

        sliders.forEach(sliderId => {
            const slider = document.getElementById(sliderId);
            slider.addEventListener('input', calculateProfit);
        });

        // Initial calculation
        document.addEventListener('DOMContentLoaded', function() {
            calculateProfit();
        });
    </script>

    <!-- Script para o Sonar do Tráfego Avançado -->
    <script>
        // Função para criar efeito de pulso no sonar
        function createPulseWave() {
            const wave = document.createElement('div');
            wave.className = 'pulse-wave';
            
            document.getElementById('pulseContainer').appendChild(wave);
            
            wave.addEventListener('animationend', () => {
                wave.remove();
            });
        }

        // Criar nova onda a cada 4 segundos
        setInterval(createPulseWave, 4000);

        // Função para atualizar a posição do ponto no sonar com base no status
        function updateSonarPosition(status) {
            const point = document.getElementById('detectionPoint');
            const message = document.getElementById('status-message');
            const centerX = 250;
            const centerY = 250;
            let distance;
            let x, y;

            // Atualizar posição com base no status
            if (status === 'green') {
                // No centro exato quando verde
                x = centerX;
                y = centerY;
            } else if (status === 'yellow') {
                // Distância intermediária quando amarelo (50% do raio)
                distance = 100;
                const angle = Math.random() * Math.PI * 2;
                x = centerX + Math.cos(angle) * distance;
                y = centerY + Math.sin(angle) * distance;
            } else {
                // Maior distância quando vermelho (80% do raio)
                distance = 180;
                const angle = Math.random() * Math.PI * 2;
                x = centerX + Math.cos(angle) * distance;
                y = centerY + Math.sin(angle) * distance;
            }

            // Atualizar posição
            if (point) {
                point.style.left = `${x}px`;
                point.style.top = `${y}px`;
            }

            // Atualizar cor e mensagem
            if (message) {
                message.classList.remove('active');
                setTimeout(() => {
                    if (status === 'green') {
                        point.style.backgroundColor = '#4CAF50';
                        point.style.boxShadow = '0 0 10px #4CAF50';
                        message.innerHTML = '<span class="green-text">MOMENTO IDEAL PARA ESCALA! Suas métricas estão excelentes, hora de investir mais!</span>';
                        message.style.borderLeft = '4px solid #4CAF50';
                    } else if (status === 'yellow') {
                        point.style.backgroundColor = '#FFC107';
                        point.style.boxShadow = '0 0 10px #FFC107';
                        message.innerHTML = '<span class="yellow-text">QUASE LÁ! Estamos nos aproximando do momento ideal para escalar. Otimize os pontos indicados abaixo.</span>';
                        message.style.borderLeft = '4px solid #FFC107';
                    } else {
                        point.style.backgroundColor = '#f44336';
                        point.style.boxShadow = '0 0 10px #f44336';
                        message.innerHTML = '<span class="red-text">MOMENTO DE OTIMIZAÇÃO! É necessário melhorar significativamente suas métricas antes de escalar.</span>';
                        message.style.borderLeft = '4px solid #f44336';
                    }
                    message.classList.add('active');
                }, 300);
            }
        }

        // Definição dos limites para cada métrica
        const metricThresholds = {
            ctr: { ruim: 0, bom: 1, otimo: 2 },  // %
            connectRate: { ruim: 0, bom: 75, otimo: 90 },  // %
            pageConversion: { ruim: 0, bom: 5, otimo: 10 },  // %
            checkoutConversion: { ruim: 0, bom: 20, otimo: 40 },  // %
            roas: { ruim: 0, bom: 1.5, otimo: 2.5 }  // multiplicador
        };

        // Função para determinar o cenário de uma métrica (ruim, bom, ótimo)
        function getScenario(value, metric) {
            const thresholds = metricThresholds[metric];
            
            if (value >= thresholds.otimo) return 'otimo';
            if (value >= thresholds.bom) return 'bom';
            return 'ruim';
        }

        // Função para atualizar o termômetro de uma métrica
        function updateThermometer(metricId, value, metric) {
            const scenario = getScenario(value, metric);
            const levelElement = document.getElementById(`${metricId}-level`);
            const valueElement = document.getElementById(`${metricId}-therm-value`);
            const nextStepElement = document.getElementById(`${metricId}-next-step`);
            
            // Atualizar valor
            valueElement.textContent = value.toFixed(2) + '%';
            
            // Definir nível no termômetro
            let percentage;
            const thresholds = metricThresholds[metric];
            
            if (scenario === 'otimo') {
                percentage = 100;
            } else if (scenario === 'bom') {
                const range = thresholds.otimo - thresholds.bom;
                const position = value - thresholds.bom;
                percentage = 66.66 + (position / range) * 33.33;
            } else {
                const range = thresholds.bom - thresholds.ruim;
                const position = value - thresholds.ruim;
                percentage = Math.max(5, (position / range) * 66.66);
            }
            
            levelElement.style.width = `${percentage}%`;
            
            // Definir próximo passo
            if (scenario === 'otimo') {
                nextStepElement.innerHTML = `<strong>Parabéns!</strong> Sua métrica está ótima. Continue mantendo essa performance.`;
            } else if (scenario === 'bom') {
                const improvement = (thresholds.otimo - value).toFixed(2);
                nextStepElement.innerHTML = `<strong>Próximo nível:</strong> Aumente ${improvement}% para atingir o nível ótimo.`;
            } else {
                const improvement = (thresholds.bom - value).toFixed(2);
                nextStepElement.innerHTML = `<strong>Próximo nível:</strong> Aumente ${improvement}% para atingir o nível bom.`;
            }
            
            return scenario;
        }

        // Função para formatar valor como moeda brasileira
        function formatCurrency(value) {
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // Função para adicionar uma seção de otimização
        function addOptimizationSection(metric, scenario, container) {
            const section = document.createElement('div');
            section.className = 'optimization-section';
            
            const statusColor = scenario === 'otimo' ? '#4CAF50' : scenario === 'bom' ? '#FFC107' : '#f44336';
            const metricName = getMetricDisplayName(metric);
            
            let causesHTML = '';
            let actionsHTML = '';
            let detailedAction = '';
            
            // Define as causas, ações e detalhes com base na métrica e cenário
            if (metric === 'ctr') {
                if (scenario === 'ruim') {
                    causesHTML = `
                        <li>Criativo visual pouco atrativo ou genérico</li>
                        <li>Ausência de um gancho claro no anúncio</li>
                        <li>Público desinteressado ou não qualificado</li>
                        <li>Contraste ruim com a plataforma</li>
                    `;
                    actionsHTML = `
                        <li>Redesenhar anúncios com foco em um gancho emocional mais forte</li>
                        <li>Fazer testes A/B em elementos visuais e texto</li>
                        <li>Revisar segmentações e expandir para públicos baseados em lookalike</li>
                    `;
                    detailedAction = `
                        <strong>Epiphany Bridge:</strong> Desenvolva anúncios que utilizem a técnica do "Epiphany Bridge", 
                        onde você conta uma história transformadora que conecte o público ao seu produto ou serviço. 
                        Este tipo de narrativa cria uma conexão emocional forte e aumenta significativamente o engajamento. 
                        Combine isso com elementos visuais impactantes que se destaquem no feed, com cores contrastantes 
                        e textos curtos e diretos que despertem curiosidade imediata.
                    `;
                } else if (scenario === 'bom') {
                    causesHTML = `
                        <li>Criativo conectado com o público, mas com potencial de melhoria</li>
                        <li>Call to Action (CTA) presente, mas não otimizado</li>
                        <li>Segmentação adequada, mas não refinada</li>
                    `;
                    actionsHTML = `
                        <li>Aprimorar o gancho emocional do anúncio</li>
                        <li>Testar variações de CTA mais diretas e irresistíveis</li>
                        <li>Refinar ainda mais o alinhamento da oferta com o público-alvo</li>
                    `;
                    detailedAction = `
                        <strong>Otimização do CTA:</strong> Experimente CTAs mais específicos e orientados à ação que 
                        criem um senso de urgência e exclusividade. Por exemplo, em vez de "Saiba mais", use "Descubra o método 
                        que transformou meu negócio em 30 dias" ou "Acesse agora o sistema exclusivo (por tempo limitado)". 
                        Combine isso com uma segmentação mais precisa baseada nos resultados obtidos até agora, focando nos 
                        subgrupos que demonstraram maior engajamento.
                    `;
                } else {
                    causesHTML = `
                        <li>Criativo fortemente conectado com o público</li>
                        <li>Call to Action (CTA) claro e irresistível</li>
                        <li>Segmentação de público adequada e otimizada</li>
                    `;
                    actionsHTML = `
                        <li>Duplicar campanhas vencedoras e aumentar orçamento progressivamente</li>
                        <li>Criar variações do anúncio vencedor para evitar fadiga de anúncio</li>
                        <li>Aplicar aprendizados em outras campanhas</li>
                    `;
                    detailedAction = `
                        <strong>Escala inteligente:</strong> Você atingiu um CTR excelente! Agora é hora de escalar 
                        gradualmente, aumentando o orçamento em incrementos de 20-30% a cada 3-4 dias. Simultaneamente, 
                        prepare 2-3 variações do anúncio vencedor para alternar e evitar a fadiga de anúncio, mantendo 
                        o mesmo gancho e estrutura que funcionaram, mas com elementos visuais ou exemplos diferentes. 
                        Documente os elementos-chave que tornaram este anúncio bem-sucedido para replicar em futuras campanhas.
                    `;
                }
            } else if (metric === 'connectRate') {
                if (scenario === 'ruim') {
                    causesHTML = `
                        <li>Página lenta ou com problemas de carregamento</li>
                        <li>Links quebrados ou redirecionamentos errados</li>
                        <li>Problemas de responsividade (experiência ruim no mobile)</li>
                        <li>Hospedagem de baixa qualidade</li>
                    `;
                    actionsHTML = `
                        <li>Fazer auditoria técnica da página com ferramentas especializadas</li>
                        <li>Otimizar imagens, vídeos e elementos pesados</li>
                        <li>Verificar links e redirecionamentos</li>
                        <li>Implementar CDN ou avaliar troca de hospedagem</li>
                    `;
                    detailedAction = `
                        <strong>Auditoria técnica completa:</strong> Use ferramentas como GTmetrix e PageSpeed Insights para 
                        identificar exatamente o que está causando a lentidão. Foque em otimizar as imagens (compressão sem perda 
                        de qualidade), implementar carregamento lazy para elementos abaixo da dobra, e minificar CSS/JavaScript. 
                        Considere implementar um CDN como Cloudflare para melhorar o tempo de resposta. Teste rigorosamente a 
                        experiência em dispositivos móveis, pois eles geralmente representam mais de 70% do tráfego e são mais 
                        suscetíveis a problemas de performance.
                    `;
                } else if (scenario === 'bom') {
                    causesHTML = `
                        <li>Página com velocidade moderada</li>
                        <li>Experiência mobile funcional mas não otimizada</li>
                        <li>Configurações de redirecionamento não otimizadas</li>
                    `;
                    actionsHTML = `
                        <li>Implementar otimizações avançadas de velocidade</li>
                        <li>Revisar e aprimorar especificamente a experiência mobile</li>
                        <li>Otimizar configurações de redirecionamento e tracking</li>
                    `;
                    detailedAction = `
                        <strong>Otimização mobile-first:</strong> Revise sua landing page com uma abordagem genuinamente 
                        mobile-first. Simplifique a navegação para telas pequenas, aumente os elementos clicáveis para tamanho 
                        mínimo de 44x44px, e verifique se o conteúdo principal aparece sem necessidade de rolagem. 
                        Para melhorar ainda mais a velocidade, considere implementar técnicas avançadas como pré-carregamento de 
                        recursos críticos, redução de JavaScript de terceiros, e utilização de formatos de imagem modernos como WebP. 
                        Uma melhoria de 0.1 segundo pode aumentar significativamente sua taxa de conversão.
                    `;
                } else {
                    causesHTML = `
                        <li>Página rápida e responsiva</li>
                        <li>Links funcionando corretamente</li>
                        <li>Experiência do usuário otimizada</li>
                    `;
                    actionsHTML = `
                        <li>Escalar campanhas com alta taxa de conexão</li>
                        <li>Usar esta página como modelo para novas campanhas</li>
                        <li>Implementar pequenos testes para melhorias incrementais</li>
                    `;
                    detailedAction = `
                        <strong>Manutenção e monitoramento:</strong> Sua página está tecnicamente excelente! Implemente um 
                        sistema de monitoramento constante para manter essa performance, como alertas automáticos se a velocidade 
                        cair abaixo de determinados limites. Considere pequenas otimizações incrementais, como pré-carregamento 
                        inteligente da próxima página mais provável ou implementação de um sistema de PWA (Progressive Web App) 
                        para melhorar ainda mais a experiência do usuário. Documente as práticas que levaram a esse resultado para 
                        aplicar em futuros projetos.
                    `;
                }
            } else if (metric === 'pageConversion') {
                if (scenario === 'ruim') {
                    causesHTML = `
                        <li>Gatilhos persuasivos mal posicionados</li>
                        <li>Falta de clareza ou ordem nas seções da página</li>
                        <li>Falta de elementos persuasivos</li>
                        <li>Experiência do usuário confusa</li>
                    `;
                    actionsHTML = `
                        <li>Mapear comportamento do usuário com ferramentas de análise</li>
                        <li>Testar novas versões da página com mudanças específicas</li>
                        <li>Adicionar elementos de prova social e escassez</li>
                    `;
                    detailedAction = `
                        <strong>Reestruturação baseada em dados:</strong> Implemente ferramentas como Hotjar ou Microsoft Clarity 
                        para criar mapas de calor e gravações de sessão. Analise onde os usuários estão parando, clicando e desistindo. 
                        Com base nesses dados, reestruture sua página seguindo um fluxo persuasivo claro: gancho atraente → problema 
                        agitado → solução apresentada → benefícios específicos → prova social robusta → oferta irresistível com 
                        escassez real → CTA claro. Em cada seção, elimine distrações e mantenha um único objetivo de conversão.
                    `;
                } else if (scenario === 'bom') {
                    causesHTML = `
                        <li>Estrutura de página adequada mas não otimizada</li>
                        <li>Elementos de prova social presentes mas limitados</li>
                        <li>Proposta de valor clara mas não irresistível</li>
                    `;
                    actionsHTML = `
                        <li>Fortalecer elementos de prova social (depoimentos, cases)</li>
                        <li>Aprimorar a proposta de valor e diferenciação</li>
                        <li>Testar variações de copy com foco em benefícios</li>
                    `;
                    detailedAction = `
                        <strong>Amplificação de prova social:</strong> Intensifique significativamente os elementos de prova social, 
                        passando de depoimentos simples para histórias completas de transformação com resultados mensuráveis e 
                        específicos. Adicione vídeos de depoimentos autênticos (não apenas texto) e demonstre resultados com números 
                        concretos. Reforce a proposta de valor ressaltando claramente o que torna sua oferta única, com comparativos 
                        diretos quando possível. Teste diferentes abordagens em títulos e subtítulos que enfatizem benefícios transformadores, 
                        não apenas características do produto/serviço.
                    `;
                } else {
                    causesHTML = `
                        <li>Página persuasiva com gatilhos claros</li>
                        <li>Estrutura de copy bem organizada</li>
                        <li>Elementos de confiança evidentes</li>
                    `;
                    actionsHTML = `
                        <li>Escalar tráfego para a página</li>
                        <li>Testar pequenas variações para otimização contínua</li>
                        <li>Analisar elementos vencedores para replicar</li>
                    `;
                    detailedAction = `
                        <strong>Otimização contínua e segmentada:</strong> Sua página está convertendo excepcionalmente bem! 
                        Agora é o momento para testes mais refinados e específicos. Implemente testes A/B segmentados por 
                        origem do tráfego, dispositivo e demografia para personalizar ainda mais a experiência. 
                        Considere implementar personalização dinâmica baseada no comportamento anterior do usuário ou 
                        parâmetros de URL. Documente detalhadamente os elementos que estão gerando essa alta conversão 
                        e crie um playbook para aplicar em futuras páginas e campanhas.
                    `;
                }
            } else if (metric === 'checkoutConversion') {
                if (scenario === 'ruim') {
                    causesHTML = `
                        <li>Alta taxa de rejeição nos pagamentos</li>
                        <li>Checkout complexo ou não intuitivo</li>
                        <li>Falta de elementos de segurança visíveis</li>
                        <li>Muitos campos obrigatórios</li>
                    `;
                    actionsHTML = `
                        <li>Simplificar o processo de checkout</li>
                        <li>Adicionar badges de segurança e provas de confiabilidade</li>
                        <li>Testar diferentes gateways de pagamento</li>
                    `;
                    detailedAction = `
                        <strong>Simplificação radical do checkout:</strong> Reduza o processo de checkout ao mínimo absoluto 
                        necessário, eliminando qualquer campo que não seja estritamente essencial. Implemente autopreenchimento 
                        sempre que possível e ofereça opção de "comprar como visitante" sem necessidade de criar conta. 
                        Adicione selos de segurança (SSL, PCI compliance) proeminentemente visíveis em cada etapa, especialmente 
                        próximo aos campos de pagamento. Teste múltiplos gateways de pagamento e métodos alternativos como Pix, 
                        especialmente para o público brasileiro onde a taxa de aprovação de cartões pode ser um desafio.
                    `;
                } else if (scenario === 'bom') {
                    causesHTML = `
                        <li>Checkout funcional mas com pontos de atrito</li>
                        <li>Elementos de segurança presentes mas não destacados</li>
                        <li>Opções de pagamento limitadas</li>
                    `;
                    actionsHTML = `
                        <li>Revisar e eliminar passos desnecessários</li>
                        <li>Destacar garantias e elementos de segurança</li>
                        <li>Ampliar opções de pagamento</li>
                    `;
                    detailedAction = `
                        <strong>Otimização de finalização:</strong> Implemente uma barra de progresso clara para mostrar exatamente 
                        em que etapa o cliente está e quanto falta para concluir. Destaque a garantia de satisfação ou política de 
                        reembolso diretamente na página de pagamento para reduzir a ansiedade de compra. Adicione uma seção de "Perguntas 
                        Frequentes" específicas sobre pagamento e segurança. Considere implementar um sistema de recuperação de carrinho 
                        abandonado via email ou WhatsApp que ofereça um incentivo especial (como frete grátis ou desconto por tempo limitado) 
                        para completar a compra.
                    `;
                } else {
                    causesHTML = `
                        <li>Processo de checkout simplificado e confiável</li>
                        <li>Processo de compra fluido</li>
                        <li>Boa taxa de aprovação</li>
                        <li>Elementos de segurança efetivos</li>
                    `;
                    actionsHTML = `
                        <li>Escalar campanhas que levam a esse checkout eficiente</li>
                        <li>Usar o checkout como referência para outras ofertas</li>
                        <li>Implementar upsells e cross-sells estratégicos</li>
                    `;
                    detailedAction = `
                        <strong>Maximização de valor por cliente:</strong> Com um checkout tão eficiente, é o momento ideal 
                        para implementar upsells e cross-sells inteligentes que aumentem o valor médio do pedido sem complicar 
                        o processo. Implemente ofertas complementares relevantes logo após a conclusão da compra, com ênfase na 
                        complementaridade e valor agregado. Considere implementar uma página de "one-click upsell" para produtos 
                        relacionados após a compra principal, onde o cliente pode adicionar itens com apenas um clique, sem precisar 
                        inserir novamente os dados de pagamento.
                    `;
                }
            }
            
            section.innerHTML = `
                <div class="optimization-header">
                    <div class="status-indicator" style="background-color: ${statusColor};"></div>
                    <h3>${metricName}</h3>
                </div>
                <div class="optimization-content">
                    <div class="optimization-causes">
                        <h4>POSSÍVEIS CAUSAS:</h4>
                        <ul>${causesHTML}</ul>
                    </div>
                    <div class="optimization-actions">
                        <h4>AÇÕES RECOMENDADAS:</h4>
                        <ul>${actionsHTML}</ul>
                    </div>
                    <div class="detailed-action">
                        ${detailedAction}
                    </div>
                </div>
            `;
            
            container.appendChild(section);
        }
        
        // Função para obter o nome de exibição de uma métrica
        function getMetricDisplayName(metric) {
            const displayNames = {
                'ctr': 'CTR (Taxa de Cliques)',
                'connectRate': 'Connect Rate (Clique → Page View)',
                'pageConversion': 'Conversão da Página (Page View → Checkout)',
                'checkoutConversion': 'Conversão do Checkout (Checkout → Compra)'
            };
            
            return displayNames[metric] || metric;
        }

        // Função para calcular e exibir os resultados
        function calculateMetrics() {
            // Obter valores dos campos
            const impressions = parseFloat(document.getElementById('impressions').value) || 0;
            const clicks = parseFloat(document.getElementById('clicks').value) || 0;
            const pageviews = parseFloat(document.getElementById('pageviews').value) || 0;
            const checkouts = parseFloat(document.getElementById('checkouts').value) || 0;
            const purchases = parseFloat(document.getElementById('purchases').value) || 0;
            const cpm = parseFloat(document.getElementById('cpm').value) || 0;
            const cpc = parseFloat(document.getElementById('cpc').value) || 0;
            const adSpend = parseFloat(document.getElementById('adSpend').value) || 0;
            const averageOrder = parseFloat(document.getElementById('averageOrder').value) || 0;
            
            // Calcular métricas
            let ctr = 0;
            let connectRate = 0;
            let pageConversion = 0;
            let checkoutConversion = 0;
            let totalConversion = 0;
            let cac = 0;
            let roas = 0;
            
            if (impressions > 0) {
                ctr = (clicks / impressions) * 100;
            }
            
            if (clicks > 0) {
                connectRate = (pageviews / clicks) * 100;
            }
            
            if (pageviews > 0) {
                pageConversion = (checkouts / pageviews) * 100;
            }
            
            if (checkouts > 0) {
                checkoutConversion = (purchases / checkouts) * 100;
            }
            
            if (impressions > 0) {
                totalConversion = (purchases / impressions) * 100;
            }
            
            if (purchases > 0) {
                cac = adSpend / purchases;
            }
            
            if (adSpend > 0) {
                roas = (purchases * averageOrder) / adSpend;
            }
            
            // Atualizar exibição das métricas calculadas
            document.getElementById('ctr-value').textContent = ctr.toFixed(2) + '%';
            document.getElementById('connect-rate-value').textContent = connectRate.toFixed(2) + '%';
            document.getElementById('page-conversion-value').textContent = pageConversion.toFixed(2) + '%';
            document.getElementById('checkout-conversion-value').textContent = checkoutConversion.toFixed(2) + '%';
            document.getElementById('total-conversion-value').textContent = totalConversion.toFixed(2) + '%';
            document.getElementById('cac-value').textContent = formatCurrency(cac);
            document.getElementById('roas-value').textContent = roas.toFixed(2);
            
            // Métricas adicionais
            document.getElementById('sales-count-value').textContent = purchases;
            
            // Cálculo do lucro bruto (receita total)
            const revenue = purchases * averageOrder;
            document.getElementById('gross-profit-value').textContent = formatCurrency(revenue);
            
            // Cálculo do lucro percentual (ROI)
            let profitPercentage = 0;
            if (adSpend > 0) {
                profitPercentage = ((revenue - adSpend) / adSpend) * 100;
            }
            document.getElementById('profit-percentage-value').textContent = profitPercentage.toFixed(2) + '%';
            
            // Atualizar termômetros
            const ctrScenario = updateThermometer('ctr', ctr, 'ctr');
            const connectRateScenario = updateThermometer('connect-rate', connectRate, 'connectRate');
            const pageConversionScenario = updateThermometer('page-conversion', pageConversion, 'pageConversion');
            const checkoutConversionScenario = updateThermometer('checkout-conversion', checkoutConversion, 'checkoutConversion');
            
            // Determinar status geral com base nas métricas
            let status = 'red';
            let greenCount = 0;
            let yellowCount = 0;
            
            if (ctrScenario === 'otimo') greenCount++;
            else if (ctrScenario === 'bom') yellowCount++;
            
            if (connectRateScenario === 'otimo') greenCount++;
            else if (connectRateScenario === 'bom') yellowCount++;
            
            if (pageConversionScenario === 'otimo') greenCount++;
            else if (pageConversionScenario === 'bom') yellowCount++;
            
            if (checkoutConversionScenario === 'otimo') greenCount++;
            else if (checkoutConversionScenario === 'bom') yellowCount++;
            
            if (roas >= metricThresholds.roas.otimo) greenCount++;
            else if (roas >= metricThresholds.roas.bom) yellowCount++;
            
            if (greenCount >= 3) {
                status = 'green';
            } else if (yellowCount >= 3 || (yellowCount >= 2 && greenCount >= 1)) {
                status = 'yellow';
            }
            
            // Atualizar posição do sonar
            updateSonarPosition(status);
            
            // Atualizar recomendações de otimização
            const optimizationContainer = document.getElementById('optimization-recommendations');
            optimizationContainer.innerHTML = '<h2>Mapa de Otimização</h2>';
            
            // Adicionar seções de otimização com base nos cenários de cada métrica
            addOptimizationSection('ctr', ctrScenario, optimizationContainer);
            addOptimizationSection('connectRate', connectRateScenario, optimizationContainer);
            addOptimizationSection('pageConversion', pageConversionScenario, optimizationContainer);
            addOptimizationSection('checkoutConversion', checkoutConversionScenario, optimizationContainer);
        }

        // Adicionar evento ao botão de calcular
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculateBtn');
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateMetrics);
            }

            // Iniciar as animações do sonar
            createPulseWave();
        });
    </script>

    <!-- Script para Métricas Comerciais -->
    <script>
        function formatNumber(number) {
            return number.toLocaleString('pt-BR', { 
                minimumFractionDigits: 2,
                maximumFractionDigits: 2 
            });
        }

        function calcular() {
            // Obter valores dos sliders com correção específica para taxa de comparecimento
            const investimento = parseInt(document.getElementById("investimento").value);
            const precoLead = parseInt(document.getElementById("precoLead").value);
            const agendamento = parseInt(document.getElementById("agendamento").value) / 100;
            // Correção específica para taxa de comparecimento
            const comparecimentoRaw = document.getElementById("comparecimento").value;
            const comparecimento = (Math.floor(comparecimentoRaw / 5) * 5) / 100; // Garante incrementos de 5%
            const conversao = parseInt(document.getElementById("conversao").value) / 100;
            const ticketMedio = parseInt(document.getElementById("ticketMedio").value);

            // Cálculos principais
            const leadsGerados = Math.floor(investimento / precoLead);
            const leadsAgendados = Math.floor(leadsGerados * agendamento);
            const leadsPresentes = Math.floor(leadsAgendados * comparecimento);
            const vendas = Math.floor(leadsPresentes * conversao);
            const faturamento = vendas * ticketMedio;
            
            // Cálculos adicionais com proteção contra divisão por zero
            const custoPorCall = leadsPresentes > 0 ? investimento / leadsPresentes : 0;
            const cac = vendas > 0 ? investimento / vendas : 0;
            const roas = investimento > 0 ? faturamento / investimento : 0;

            // Atualizar valores dos sliders
            document.getElementById("investimentoVal").textContent = investimento.toLocaleString('pt-BR');
            document.getElementById("precoLeadVal").textContent = precoLead;
            document.getElementById("agendamentoVal").textContent = Math.round(agendamento * 100);
            // Exibição corrigida para taxa de comparecimento
            document.getElementById("comparecimentoVal").textContent = Math.floor(comparecimentoRaw / 5) * 5;
            document.getElementById("conversaoVal").textContent = Math.round(conversao * 100);
            document.getElementById("ticketMedioVal").textContent = ticketMedio.toLocaleString('pt-BR');

            // Atualizar resultados
            document.getElementById("faturamento").textContent = formatNumber(faturamento);
            document.getElementById("vendas").textContent = vendas;
            document.getElementById("custoCall").textContent = formatNumber(custoPorCall);
            document.getElementById("cac3").textContent = formatNumber(cac);
            document.getElementById("roas3").textContent = formatNumber(roas);
            
            // Cálculo de SDRs e Closers baseado no volume
            const sdrs = Math.max(1, Math.ceil(leadsPresentes / 100));
            const closers = Math.max(1, Math.ceil(vendas / 30));
            
            document.getElementById("sdrs").textContent = sdrs;
            document.getElementById("closers").textContent = closers;
        }

        // Inicializar cálculos quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se estamos na aba correta antes de executar o cálculo
            const calculadoraElement = document.getElementById('calculator-3');
            if (calculadoraElement) {
                calcular();
            }
        });
    </script>

    <!-- Script para CPA Máximo -->
    <script>
        // Função para formatar valores como moeda brasileira
        function formatCurrencyCPA(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value);
        }
        
        // Função para formatar valores como percentual
        function formatPercentage(value) {
            return value.toLocaleString('pt-BR', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }) + '%';
        }
        
        // Função para criar um novo elemento de custo variável
        function createVariableCostElement(id) {
            const costContainer = document.createElement('div');
            costContainer.className = 'variable-cost';
            costContainer.dataset.id = id;
            
            costContainer.innerHTML = `
                <div class="cost-name">
                    <input type="text" class="variable-cost-name" placeholder="Nome do custo variável" autocomplete="off">
                </div>
                <div class="cost-value">
                    <input type="number" class="variable-cost-value" placeholder="Valor" step="0.01">
                </div>
                <div class="cost-type">
                    <label>
                        <input type="radio" name="costType${id}" value="fixed" checked> R$
                    </label>
                    <label>
                        <input type="radio" name="costType${id}" value="percentage"> %
                    </label>
                </div>
                <button class="remove-cost" title="Remover custo">×</button>
            `;
            
            return costContainer;
        }
        
        // Função para calcular todas as métricas
        function calculateCPAMaximo() {
            // Obter valores dos campos
            const productPrice = parseFloat(document.getElementById('product-price').value) || 0;
            const platformPercentage = parseFloat(document.getElementById('platform-percentage').value) || 0;
            const platformFixed = parseFloat(document.getElementById('platform-fixed').value) || 0;
            
            // Calcular taxa da plataforma
            const platformFee = (productPrice * (platformPercentage / 100)) + platformFixed;
            
            // Obter e calcular todos os custos variáveis
            let totalVariableCosts = platformFee;
            const costElements = document.querySelectorAll('.variable-cost');
            
            costElements.forEach(costElement => {
                const costValue = parseFloat(costElement.querySelector('.variable-cost-value').value) || 0;
                const costType = costElement.querySelector('input[type="radio"]:checked').value;
                
                if (costType === 'fixed') {
                    totalVariableCosts += costValue;
                } else {
                    totalVariableCosts += (productPrice * (costValue / 100));
                }
            });
            
            // Calcular margem de contribuição
            const contributionMargin = productPrice - totalVariableCosts;
            const contributionPercentage = (contributionMargin / productPrice) * 100;
            
            // Calcular CPA máximo para diferentes ROIs
            const cpaRoi1 = contributionMargin;
            const cpaRoi1_5 = contributionMargin / 1.5;
            const cpaRoi2 = contributionMargin / 2;
            
            // Atualizar os elementos na interface
            document.getElementById('revenue-per-sale').textContent = formatCurrencyCPA(productPrice);
            document.getElementById('total-variable-costs').textContent = formatCurrencyCPA(totalVariableCosts);
            document.getElementById('contribution-margin').textContent = formatCurrencyCPA(contributionMargin);
            document.getElementById('contribution-percentage').textContent = formatPercentage(contributionPercentage);
            
            document.getElementById('cpa-roi-1').textContent = formatCurrencyCPA(cpaRoi1);
            document.getElementById('cpa-roi-1-5').textContent = formatCurrencyCPA(cpaRoi1_5);
            document.getElementById('cpa-roi-2').textContent = formatCurrencyCPA(cpaRoi2);
            
            // Calcular orçamentos baseados na meta de vendas
            calculateBudgets(cpaRoi1, cpaRoi1_5, cpaRoi2);
        }
        
        // Função para calcular orçamentos baseados na meta de vendas e CPAs máximos
        function calculateBudgets(cpaRoi1, cpaRoi1_5, cpaRoi2) {
            const salesGoal = parseInt(document.getElementById('sales-goal').value) || 0;
            
            const budgetRoi1 = salesGoal * cpaRoi1;
            const budgetRoi1_5 = salesGoal * cpaRoi1_5;
            const budgetRoi2 = salesGoal * cpaRoi2;
            
            document.getElementById('budget-roi-1').textContent = formatCurrencyCPA(budgetRoi1);
            document.getElementById('budget-roi-1-5').textContent = formatCurrencyCPA(budgetRoi1_5);
            document.getElementById('budget-roi-2').textContent = formatCurrencyCPA(budgetRoi2);
        }
        
        // Inicializar a aba CPA Máximo
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar evento para o botão de adicionar custo variável
            const addCostBtn = document.getElementById('add-cost-btn');
            if (addCostBtn) {
                addCostBtn.addEventListener('click', function() {
                    const costId = Date.now(); // ID único baseado no timestamp
                    const newCost = createVariableCostElement(costId);
                    document.getElementById('variable-costs-container').appendChild(newCost);
                    
                    // Adicionar evento para remover este custo
                    newCost.querySelector('.remove-cost').addEventListener('click', function() {
                        newCost.remove();
                    });
                });
                
                // Criar o primeiro campo de custo variável quando a página carregar
                addCostBtn.click();
            }
            
            // Adicionar evento para o botão de calcular
            const calculateBtn = document.getElementById('calculate-btn');
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateCPAMaximo);
            }
            
            // Adicionar evento para calcular orçamentos quando a meta de vendas mudar
            const salesGoalInput = document.getElementById('sales-goal');
            if (salesGoalInput) {
                salesGoalInput.addEventListener('input', function() {
                    // Remover símbolos de moeda e converter para número
                    const cpaRoi1Text = document.getElementById('cpa-roi-1').textContent;
                    const cpaRoi1_5Text = document.getElementById('cpa-roi-1-5').textContent;
                    const cpaRoi2Text = document.getElementById('cpa-roi-2').textContent;
                    
                    const cpaRoi1 = parseFloat(cpaRoi1Text.replace(/[^\d,.-]/g, '').replace(',', '.')) || 0;
                    const cpaRoi1_5 = parseFloat(cpaRoi1_5Text.replace(/[^\d,.-]/g, '').replace(',', '.')) || 0;
                    const cpaRoi2 = parseFloat(cpaRoi2Text.replace(/[^\d,.-]/g, '').replace(',', '.')) || 0;
                    
                    calculateBudgets(cpaRoi1, cpaRoi1_5, cpaRoi2);
                });
            }
        });
    </script>
</body>
